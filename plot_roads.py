import json
import matplotlib.pyplot as plt
from utils.funcs import *


# pi/6
# roads = ''' {"tmq_header":{"tmq_stamp":"1668580057774"},"timestamp":"1668580057774184851","trajectory_type":"kTrajectory","waypoints":[{"pose":{"x":0.0100698471,"y":-0.0649843216,"theta":-0.033588931},"direction":"kForward","speed":0.3},{"pose":{"x":0.159939766,"y":-0.071182251,"theta":-0.0490781143},"direction":"kForward","speed":0.3},{"pose":{"x":0.309607506,"y":-0.0810565948,"theta":-0.0826674625},"direction":"kForward","speed":0.3},{"pose":{"x":0.309607506,"y":-0.0810565948,"theta":-0.0826674625},"direction":"kBackward","speed":0.3},{"pose":{"x":0.160355568,"y":-0.0661621094,"theta":-0.116256811},"direction":"kBackward","speed":0.3},{"pose":{"x":0.0115089417,"y":-0.0476093292,"theta":-0.131746},"direction":"kBackward","speed":0.3},{"pose":{"x":-0.136832237,"y":-0.0254116058,"theta":-0.165335342},"direction":"kBackward","speed":0.3},{"pose":{"x":-0.284589767,"y":0.000420570374,"theta":-0.180824518},"direction":"kBackward","speed":0.3},{"pose":{"x":-0.431663513,"y":0.0298690796,"theta":-0.214413866},"direction":"kBackward","speed":0.3},{"pose":{"x":-0.865795135,"y":0.147590637,"theta":-0.315181911},"direction":"kBackward","speed":0.3},{"pose":{"x":-1.00916,"y":0.191685677,"theta":-0.281592578},"direction":"kBackward","speed":0.3},{"pose":{"x":-1.15356922,"y":0.232252121,"theta":-0.266103387},"direction":"kBackward","speed":0.3},{"pose":{"x":-1.2982893,"y":0.271698,"theta":-0.266103387},"direction":"kBackward","speed":0.3},{"pose":{"x":-1.72575951,"y":0.411691666,"theta":-0.366871417},"direction":"kBackward","speed":0.3},{"pose":{"x":-2.1369772,"y":0.593978882,"theta":-0.467639446},"direction":"kBackward","speed":0.3},{"pose":{"x":-2.527771,"y":0.816707611,"theta":-0.568407476},"direction":"kBackward","speed":0.3},{"pose":{"x":-2.90124893,"y":1.06766129,"theta":-0.614875},"direction":"kBackward","speed":0.3},{"pose":{"x":-3.26882935,"y":1.32724667,"theta":-0.614875},"direction":"kBackward","speed":0.3},{"pose":{"x":-3.64885569,"y":1.56788826,"theta":-0.514107},"direction":"kBackward","speed":0.3},{"pose":{"x":-4.05116224,"y":1.76907921,"theta":-0.413338959},"direction":"kBackward","speed":0.3},{"pose":{"x":-4.47166777,"y":1.92877865,"theta":-0.31257093},"direction":"kBackward","speed":0.3},{"pose":{"x":-4.61514711,"y":1.97249889,"theta":-0.278981596},"direction":"kBackward","speed":0.3},{"pose":{"x":-4.75966167,"y":2.01268768,"theta":-0.263492405},"direction":"kBackward","speed":0.3},{"pose":{"x":-4.90511322,"y":2.04931641,"theta":-0.229903072},"direction":"kBackward","speed":0.3},{"pose":{"x":-5.05142546,"y":2.08236694,"theta":-0.214413896},"direction":"kBackward","speed":0.3},{"pose":{"x":-5.1984992,"y":2.11181498,"theta":-0.180824548},"direction":"kBackward","speed":0.3},{"pose":{"x":-5.34647846,"y":2.13630772,"theta":-0.1472352},"direction":"kBackward","speed":0.3},{"pose":{"x":-5.49502,"y":2.15716362,"theta":-0.131746024},"direction":"kBackward","speed":0.3},{"pose":{"x":-5.64402294,"y":2.1743679,"theta":-0.0981566831},"direction":"kBackward","speed":0.3},{"pose":{"x":-5.79340839,"y":2.18791151,"theta":-0.0826675},"direction":"kBackward","speed":0.3},{"pose":{"x":-5.94307613,"y":2.1977849,"theta":-0.0490781479},"direction":"kBackward","speed":0.3},{"pose":{"x":-6.09299088,"y":2.20262623,"theta":-0.0154888},"direction":"kBackward","speed":0.3},{"pose":{"x":-6.24298382,"y":2.2037878,"theta":3.01991605e-07},"direction":"kBackward","speed":0.3},{"pose":{"x":-6.39298391,"y":2.2037878,"theta":3.01991605e-07},"direction":"kBackward","speed":0.3},{"pose":{"x":-6.54298401,"y":2.2037878,"theta":3.01991605e-07},"direction":"kBackward","speed":0.3}]}
# '''


roads = '''{"tmq_header":{"tmq_stamp":"1668649429787"},"timestamp":"1668649429787079801","trajectory_type":"kTrajectory","waypoints":[{"pose":{"x":-0.0407249928,"y":-0.0518894196,"theta":-0.00522232056},"direction":"kForward","speed":0.3},{"pose":{"x":0.109272957,"y":-0.0526723862,"theta":-0.00522232056},"direction":"kForward","speed":0.3},{"pose":{"x":0.25922966,"y":-0.0559740067,"theta":-0.0388116688},"direction":"kForward","speed":0.3},{"pose":{"x":0.409065485,"y":-0.0629549,"theta":-0.0543008521},"direction":"kForward","speed":0.3},{"pose":{"x":0.558679581,"y":-0.0736103058,"theta":-0.0878902},"direction":"kForward","speed":0.3},{"pose":{"x":0.707992554,"y":-0.0879335403,"theta":-0.103379384},"direction":"kForward","speed":0.3},{"pose":{"x":0.856903553,"y":-0.105916023,"theta":-0.136968732},"direction":"kForward","speed":0.3},{"pose":{"x":1.0053339,"y":-0.127548218,"theta":-0.152457908},"direction":"kForward","speed":0.3},{"pose":{"x":1.15359402,"y":-0.150328636,"theta":-0.152457908},"direction":"kForward","speed":0.3},{"pose":{"x":1.30185413,"y":-0.173109055,"theta":-0.152457908},"direction":"kForward","speed":0.3},{"pose":{"x":1.45046854,"y":-0.193395615,"theta":-0.11886856},"direction":"kForward","speed":0.3},{"pose":{"x":1.59954166,"y":-0.210029602,"theta":-0.103379376},"direction":"kForward","speed":0.3},{"pose":{"x":2.04872,"y":-0.233856201,"theta":-0.00261133513},"direction":"kForward","speed":0.3},{"pose":{"x":2.49801683,"y":-0.212375641,"theta":0.0981567577},"direction":"kForward","speed":0.3},{"pose":{"x":2.94287348,"y":-0.145806313,"theta":0.198924839},"direction":"kForward","speed":0.3},{"pose":{"x":3.37877655,"y":-0.034822464,"theta":0.299692929},"direction":"kForward","speed":0.3},{"pose":{"x":3.80130339,"y":0.119448662,"theta":0.400461018},"direction":"kForward","speed":0.3},{"pose":{"x":4.20616817,"y":0.315443039,"theta":0.501229107},"direction":"kForward","speed":0.3},{"pose":{"x":4.58926249,"y":0.551171303,"theta":0.601997197},"direction":"kForward","speed":0.3},{"pose":{"x":4.94669962,"y":0.824242592,"theta":0.702765286},"direction":"kForward","speed":0.3},{"pose":{"x":5.27485323,"y":1.13188457,"theta":0.803533375},"direction":"kForward","speed":0.3},{"pose":{"x":5.5872283,"y":1.45580101,"theta":0.803533375},"direction":"kForward","speed":0.3},{"pose":{"x":5.91538191,"y":1.76344395,"theta":0.702765286},"direction":"kForward","speed":0.3},{"pose":{"x":6.27281904,"y":2.03651428,"theta":0.601997197},"direction":"kForward","speed":0.3},{"pose":{"x":6.65591383,"y":2.27224255,"theta":0.501229107},"direction":"kForward","speed":0.3},{"pose":{"x":6.78864813,"y":2.34209538,"theta":0.467639744},"direction":"kForward","speed":0.3},{"pose":{"x":6.92365408,"y":2.40745068,"theta":0.434050381},"direction":"kForward","speed":0.3},{"pose":{"x":7.06022692,"y":2.46947575,"theta":0.41856128},"direction":"kForward","speed":0.3},{"pose":{"x":7.19827604,"y":2.52812958,"theta":0.384971917},"direction":"kForward","speed":0.3},{"pose":{"x":7.33772707,"y":2.58338165,"theta":0.369482815},"direction":"kForward","speed":0.3},{"pose":{"x":7.47848749,"y":2.63519192,"theta":0.335893452},"direction":"kForward","speed":0.3},{"pose":{"x":7.62090826,"y":2.68224716,"theta":0.302304089},"direction":"kForward","speed":0.3},{"pose":{"x":7.76444578,"y":2.72579384,"theta":0.286815},"direction":"kForward","speed":0.3},{"pose":{"x":7.90900373,"y":2.76580524,"theta":0.253225625},"direction":"kForward","speed":0.3},{"pose":{"x":8.05450439,"y":2.80225801,"theta":0.237736523},"direction":"kForward","speed":0.3},{"pose":{"x":8.20085144,"y":2.83512878,"theta":0.20414716},"direction":"kForward","speed":0.3},{"pose":{"x":8.34822083,"y":2.86306667,"theta":0.170557797},"direction":"kForward","speed":0.3},{"pose":{"x":8.49623489,"y":2.88738108,"theta":0.155068696},"direction":"kForward","speed":0.3},{"pose":{"x":8.64479637,"y":2.90805531,"theta":0.12147934},"direction":"kForward","speed":0.3},{"pose":{"x":9.09347,"y":2.94000769,"theta":0.0207112469},"direction":"kForward","speed":0.3},{"pose":{"x":9.09347,"y":2.94000769,"theta":0.0207112469},"direction":"kBackward","speed":0.3},{"pose":{"x":8.94347763,"y":2.93942022,"theta":-0.0128780454},"direction":"kBackward","speed":0.3},{"pose":{"x":8.79355049,"y":2.94387054,"theta":-0.0464673936},"direction":"kBackward","speed":0.3},{"pose":{"x":8.64385796,"y":2.9533534,"theta":-0.0800567418},"direction":"kBackward","speed":0.3},{"pose":{"x":8.49456787,"y":2.96785736,"theta":-0.11364609},"direction":"kBackward","speed":0.3},{"pose":{"x":8.34585,"y":2.98736715,"theta":-0.147235438},"direction":"kBackward","speed":0.3},{"pose":{"x":8.19787,"y":3.01186037,"theta":-0.180824786},"direction":"kBackward","speed":0.3},{"pose":{"x":8.05079651,"y":3.04130936,"theta":-0.214414135},"direction":"kBackward","speed":0.3},{"pose":{"x":7.90398932,"y":3.0720892,"theta":-0.198924959},"direction":"kBackward","speed":0.3},{"pose":{"x":7.75672388,"y":3.10059166,"theta":-0.183435783},"direction":"kBackward","speed":0.3},{"pose":{"x":7.60903406,"y":3.1268096,"theta":-0.167946607},"direction":"kBackward","speed":0.3},{"pose":{"x":7.46114492,"y":3.15188313,"theta":-0.167946607},"direction":"kBackward","speed":0.3},{"pose":{"x":7.31370497,"y":3.17943573,"theta":-0.201535955},"direction":"kBackward","speed":0.3},{"pose":{"x":7.16651392,"y":3.20832157,"theta":-0.186046779},"direction":"kBackward","speed":0.3},{"pose":{"x":7.01866388,"y":3.23358727,"theta":-0.152457431},"direction":"kBackward","speed":0.3},{"pose":{"x":6.57119513,"y":3.27942085,"theta":-0.0516893864},"direction":"kBackward","speed":0.3},{"pose":{"x":6.57119513,"y":3.27942085,"theta":-0.0516893864},"direction":"kForward","speed":0.3},{"pose":{"x":6.72109652,"y":3.27418804,"theta":-0.01810004},"direction":"kForward","speed":0.3},{"pose":{"x":6.87108755,"y":3.27263451,"theta":-0.0026108583},"direction":"kForward","speed":0.3},{"pose":{"x":7.02106619,"y":3.27476215,"theta":0.0309785046},"direction":"kForward","speed":0.3},{"pose":{"x":7.17088747,"y":3.28192472,"theta":0.0645678714},"direction":"kForward","speed":0.3},{"pose":{"x":7.3203845,"y":3.29411507,"theta":0.0981572345},"direction":"kForward","speed":0.3},{"pose":{"x":7.46966219,"y":3.308815,"theta":0.0981572345},"direction":"kForward","speed":0.3},{"pose":{"x":7.61894,"y":3.32351494,"theta":0.0981572345},"direction":"kForward","speed":0.3},{"pose":{"x":7.76832438,"y":3.33705807,"theta":0.0826681331},"direction":"kForward","speed":0.3},{"pose":{"x":7.91781187,"y":3.34944439,"theta":0.0826681331},"direction":"kForward","speed":0.3},{"pose":{"x":8.06729889,"y":3.36183071,"theta":0.0826681331},"direction":"kForward","speed":0.3},{"pose":{"x":8.21696663,"y":3.37170362,"theta":0.0490787663},"direction":"kForward","speed":0.3},{"pose":{"x":8.36678696,"y":3.37906265,"theta":0.0490787663},"direction":"kForward","speed":0.3},{"pose":{"x":8.51670074,"y":3.3839035,"theta":0.0154894032},"direction":"kForward","speed":0.3},{"pose":{"x":8.66669464,"y":3.38506508,"theta":3.01991605e-07},"direction":"kForward","speed":0.3}]}
'''

def print_roads():
    js = json.loads(roads)
    eles = js["waypoints"]
    ls_res = list()
    ls_pos = list()
    for ele in eles:
        ls_res.append((ele["pose"]["x"], ele["pose"]["y"], ele["pose"]["theta"]))
        ls_pos.append((ele["pose"]["x"], ele["pose"]["y"]))
    
    print("List result:")
    print(ls_res)

    print("List pos:")
    print(ls_pos)

    xy = conv_tuple_list_to_x_y_map(ls_res)
    plt.scatter(xy.x, xy.y, s=POINT_SIZE , cmap=plt.cm.Spectral, alpha=0.8)
    plt.xlim((-10.0, 10.0))
    plt.ylim((-10.0, 10.0))    
    plt.xticks(range(-10, 10))
    plt.yticks(range(-10, 10))
    plt.show()

if __name__ == '__main__':
    print_roads()