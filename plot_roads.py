import json
import matplotlib.pyplot as plt
from utils.funcs import *


# pi/6
# roads = ''' {"tmq_header":{"tmq_stamp":"1668580057774"},"timestamp":"1668580057774184851","trajectory_type":"kTrajectory","waypoints":[{"pose":{"x":0.0100698471,"y":-0.0649843216,"theta":-0.033588931},"direction":"kForward","speed":0.3},{"pose":{"x":0.159939766,"y":-0.071182251,"theta":-0.0490781143},"direction":"kForward","speed":0.3},{"pose":{"x":0.309607506,"y":-0.0810565948,"theta":-0.0826674625},"direction":"kForward","speed":0.3},{"pose":{"x":0.309607506,"y":-0.0810565948,"theta":-0.0826674625},"direction":"kBackward","speed":0.3},{"pose":{"x":0.160355568,"y":-0.0661621094,"theta":-0.116256811},"direction":"kBackward","speed":0.3},{"pose":{"x":0.0115089417,"y":-0.0476093292,"theta":-0.131746},"direction":"kBackward","speed":0.3},{"pose":{"x":-0.136832237,"y":-0.0254116058,"theta":-0.165335342},"direction":"kBackward","speed":0.3},{"pose":{"x":-0.284589767,"y":0.000420570374,"theta":-0.180824518},"direction":"kBackward","speed":0.3},{"pose":{"x":-0.431663513,"y":0.0298690796,"theta":-0.214413866},"direction":"kBackward","speed":0.3},{"pose":{"x":-0.865795135,"y":0.147590637,"theta":-0.315181911},"direction":"kBackward","speed":0.3},{"pose":{"x":-1.00916,"y":0.191685677,"theta":-0.281592578},"direction":"kBackward","speed":0.3},{"pose":{"x":-1.15356922,"y":0.232252121,"theta":-0.266103387},"direction":"kBackward","speed":0.3},{"pose":{"x":-1.2982893,"y":0.271698,"theta":-0.266103387},"direction":"kBackward","speed":0.3},{"pose":{"x":-1.72575951,"y":0.411691666,"theta":-0.366871417},"direction":"kBackward","speed":0.3},{"pose":{"x":-2.1369772,"y":0.593978882,"theta":-0.467639446},"direction":"kBackward","speed":0.3},{"pose":{"x":-2.527771,"y":0.816707611,"theta":-0.568407476},"direction":"kBackward","speed":0.3},{"pose":{"x":-2.90124893,"y":1.06766129,"theta":-0.614875},"direction":"kBackward","speed":0.3},{"pose":{"x":-3.26882935,"y":1.32724667,"theta":-0.614875},"direction":"kBackward","speed":0.3},{"pose":{"x":-3.64885569,"y":1.56788826,"theta":-0.514107},"direction":"kBackward","speed":0.3},{"pose":{"x":-4.05116224,"y":1.76907921,"theta":-0.413338959},"direction":"kBackward","speed":0.3},{"pose":{"x":-4.47166777,"y":1.92877865,"theta":-0.31257093},"direction":"kBackward","speed":0.3},{"pose":{"x":-4.61514711,"y":1.97249889,"theta":-0.278981596},"direction":"kBackward","speed":0.3},{"pose":{"x":-4.75966167,"y":2.01268768,"theta":-0.263492405},"direction":"kBackward","speed":0.3},{"pose":{"x":-4.90511322,"y":2.04931641,"theta":-0.229903072},"direction":"kBackward","speed":0.3},{"pose":{"x":-5.05142546,"y":2.08236694,"theta":-0.214413896},"direction":"kBackward","speed":0.3},{"pose":{"x":-5.1984992,"y":2.11181498,"theta":-0.180824548},"direction":"kBackward","speed":0.3},{"pose":{"x":-5.34647846,"y":2.13630772,"theta":-0.1472352},"direction":"kBackward","speed":0.3},{"pose":{"x":-5.49502,"y":2.15716362,"theta":-0.131746024},"direction":"kBackward","speed":0.3},{"pose":{"x":-5.64402294,"y":2.1743679,"theta":-0.0981566831},"direction":"kBackward","speed":0.3},{"pose":{"x":-5.79340839,"y":2.18791151,"theta":-0.0826675},"direction":"kBackward","speed":0.3},{"pose":{"x":-5.94307613,"y":2.1977849,"theta":-0.0490781479},"direction":"kBackward","speed":0.3},{"pose":{"x":-6.09299088,"y":2.20262623,"theta":-0.0154888},"direction":"kBackward","speed":0.3},{"pose":{"x":-6.24298382,"y":2.2037878,"theta":3.01991605e-07},"direction":"kBackward","speed":0.3},{"pose":{"x":-6.39298391,"y":2.2037878,"theta":3.01991605e-07},"direction":"kBackward","speed":0.3},{"pose":{"x":-6.54298401,"y":2.2037878,"theta":3.01991605e-07},"direction":"kBackward","speed":0.3}]}
# '''


roads = '''{"tmq_header":{"tmq_stamp":"1668581172869"},"timestamp":"1668581172868950356","trajectory_type":"kTrajectory","waypoints":[{"pose":{"x":-0.0596752167,"y":-0.0292987823,"theta":2.36660361},"direction":"kForward","speed":0.3},{"pose":{"x":-0.167647362,"y":0.0748224258,"theta":2.38209271},"direction":"kForward","speed":0.3},{"pose":{"x":-0.277219772,"y":0.177258492,"theta":2.39758182},"direction":"kForward","speed":0.3},{"pose":{"x":-0.387583733,"y":0.278844833,"theta":2.39758182},"direction":"kForward","speed":0.3},{"pose":{"x":-0.499632835,"y":0.378559113,"theta":2.43117118},"direction":"kForward","speed":0.3},{"pose":{"x":-0.614967346,"y":0.474453926,"theta":2.46476054},"direction":"kForward","speed":0.3},{"pose":{"x":-0.733457565,"y":0.566421509,"theta":2.49835},"direction":"kForward","speed":0.3},{"pose":{"x":-0.854969,"y":0.65435791,"theta":2.53193927},"direction":"kForward","speed":0.3},{"pose":{"x":-0.979365349,"y":0.738163948,"theta":2.56552863},"direction":"kForward","speed":0.3},{"pose":{"x":-1.36844349,"y":0.963879585,"theta":2.66629672},"direction":"kForward","speed":0.3},{"pose":{"x":-1.76856422,"y":1.16980076,"theta":2.66629672},"direction":"kForward","speed":0.3},{"pose":{"x":-2.17837429,"y":1.35523033,"theta":2.76706481},"direction":"kForward","speed":0.3},{"pose":{"x":-2.60085392,"y":1.51006699,"theta":2.81353235},"direction":"kForward","speed":0.3},{"pose":{"x":-3.03006935,"y":1.64511299,"theta":2.86},"direction":"kForward","speed":0.3},{"pose":{"x":-3.46790981,"y":1.74818897,"theta":2.96076798},"direction":"kForward","speed":0.3},{"pose":{"x":-3.61546421,"y":1.77516556,"theta":2.96076798},"direction":"kForward","speed":0.3},{"pose":{"x":-3.76344395,"y":1.79965973,"theta":2.99435735},"direction":"kForward","speed":0.3},{"pose":{"x":-3.91182137,"y":1.82166576,"theta":2.99435735},"direction":"kForward","speed":0.3},{"pose":{"x":-4.06036186,"y":1.84251976,"theta":3.00984645},"direction":"kForward","speed":0.3},{"pose":{"x":-4.20906162,"y":1.86222458,"theta":3.00984645},"direction":"kForward","speed":0.3},{"pose":{"x":-4.35806465,"y":1.87942886,"theta":3.04343581},"direction":"kForward","speed":0.3},{"pose":{"x":-4.50706768,"y":1.89663315,"theta":3.00984645},"direction":"kForward","speed":0.3},{"pose":{"x":-4.65607071,"y":1.91383743,"theta":3.04343581},"direction":"kForward","speed":0.3},{"pose":{"x":-4.80545616,"y":1.92738152,"theta":3.05892491},"direction":"kForward","speed":0.3},{"pose":{"x":-4.9551239,"y":1.93725586,"theta":3.09251428},"direction":"kForward","speed":0.3},{"pose":{"x":-5.10503864,"y":1.94209766,"theta":3.12610364},"direction":"kForward","speed":0.3},{"pose":{"x":-5.25502062,"y":1.94442081,"theta":3.12610364},"direction":"kForward","speed":0.3},{"pose":{"x":-5.40501404,"y":1.94558144,"theta":-3.1415925},"direction":"kForward","speed":0.3},{"pose":{"x":-5.55501413,"y":1.94558144,"theta":-3.1415925},"direction":"kForward","speed":0.3},{"pose":{"x":-6.00425339,"y":1.92292786,"theta":-3.04082441},"direction":"kForward","speed":0.3},{"pose":{"x":-6.00425339,"y":1.92292786,"theta":-3.04082441},"direction":"kBackward","speed":0.3},{"pose":{"x":-5.85529566,"y":1.94052029,"theta":-3.00723505},"direction":"kBackward","speed":0.3},{"pose":{"x":-5.70701313,"y":1.96310616,"theta":-2.97364569},"direction":"kBackward","speed":0.3},{"pose":{"x":-5.55932474,"y":1.98932362,"theta":-2.95815659},"direction":"kBackward","speed":0.3},{"pose":{"x":-5.41232824,"y":2.01915646,"theta":-2.92456722},"direction":"kBackward","speed":0.3},{"pose":{"x":-5.26610374,"y":2.05258846,"theta":-2.90907812},"direction":"kBackward","speed":0.3},{"pose":{"x":-5.11987877,"y":2.08602142,"theta":-2.92456722},"direction":"kBackward","speed":0.3},{"pose":{"x":-4.97288227,"y":2.11585426,"theta":-2.95815659},"direction":"kBackward","speed":0.3},{"pose":{"x":-4.82496738,"y":2.14073372,"theta":-2.99174595},"direction":"kBackward","speed":0.3},{"pose":{"x":-4.6763,"y":2.16063118,"theta":-3.02533531},"direction":"kBackward","speed":0.3},{"pose":{"x":-4.52704811,"y":2.17552567,"theta":-3.05892467},"direction":"kBackward","speed":0.3},{"pose":{"x":-4.37756,"y":2.18791199,"theta":-3.05892467},"direction":"kBackward","speed":0.3},{"pose":{"x":-4.2278924,"y":2.19778538,"theta":-3.09251404},"direction":"kBackward","speed":0.3},{"pose":{"x":-4.07797718,"y":2.20262623,"theta":-3.1261034},"direction":"kBackward","speed":0.3},{"pose":{"x":-3.92798424,"y":2.2037878,"theta":-3.1415925},"direction":"kBackward","speed":0.3}]}
'''

def print_roads():
    js = json.loads(roads)
    eles = js["waypoints"]
    ls_res = list()
    ls_pos = list()
    for ele in eles:
        ls_res.append((ele["pose"]["x"], ele["pose"]["y"], ele["pose"]["theta"]))
        ls_pos.append((ele["pose"]["x"], ele["pose"]["y"]))
    
    print("List result:")
    print(ls_res)

    print("List pos:")
    print(ls_pos)

    xy = conv_tuple_list_to_x_y_map(ls_res)
    plt.scatter(xy.x, xy.y, s=POINT_SIZE , cmap=plt.cm.Spectral, alpha=0.8)
    plt.xlim((-10.0, 10.0))
    plt.ylim((-10.0, 10.0))    
    plt.xticks(range(-10, 10))
    plt.yticks(range(-10, 10))
    plt.show()

if __name__ == '__main__':
    print_roads()