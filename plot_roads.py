import json
import matplotlib.pyplot as plt
from utils.funcs import *


# pi/6
roads = '''{"tmq_header":{"tmq_stamp":"1667898576350"},"timestamp":"1667898576349949222","trajectory_type":"kTrajectory","waypoints":[{"pose":{"x":0,"y":0.0224628448,"theta":3.1415925},"direction":"kBackward","speed":0.3},{"pose":{"x":0.302948,"y":0.0138397217,"theta":3.08468103},"direction":"kBackward","speed":0.3},{"pose":{"x":0.45263195,"y":0.00414848328,"theta":3.06919193},"direction":"kBackward","speed":0.3},{"pose":{"x":0.602028847,"y":-0.0092124939,"theta":3.03560257},"direction":"kBackward","speed":0.3},{"pose":{"x":0.750892639,"y":-0.0275831223,"theta":3.00201321},"direction":"kBackward","speed":0.3},{"pose":{"x":0.750892639,"y":-0.0275831223,"theta":3.00201321},"direction":"kForward","speed":0.3},{"pose":{"x":0.602729797,"y":-0.00422287,"theta":2.96842384},"direction":"kForward","speed":0.3},{"pose":{"x":0.455434799,"y":0.0240983963,"theta":2.93483448},"direction":"kForward","speed":0.3},{"pose":{"x":0.309174538,"y":0.0573511124,"theta":2.90124512},"direction":"kForward","speed":0.3},{"pose":{"x":0.163486481,"y":0.0930566788,"theta":2.90124512},"direction":"kForward","speed":0.3},{"pose":{"x":0.0184249878,"y":0.131202698,"theta":2.86765575},"direction":"kForward","speed":0.3},{"pose":{"x":-0.407935143,"y":0.274541855,"theta":2.76688766},"direction":"kForward","speed":0.3},{"pose":{"x":-0.817712784,"y":0.460043907,"theta":2.66611958},"direction":"kForward","speed":0.3},{"pose":{"x":-1.20675087,"y":0.685827255,"theta":2.56535149},"direction":"kForward","speed":0.3},{"pose":{"x":-1.57110214,"y":0.949603081,"theta":2.4645834},"direction":"kForward","speed":0.3},{"pose":{"x":-1.90706921,"y":1.24869251,"theta":2.36381531},"direction":"kForward","speed":0.3},{"pose":{"x":-2.24303627,"y":1.54778194,"theta":2.4645834},"direction":"kForward","speed":0.3},{"pose":{"x":-2.60738754,"y":1.81155777,"theta":2.56535149},"direction":"kForward","speed":0.3},{"pose":{"x":-2.99642563,"y":2.03734112,"theta":2.66611958},"direction":"kForward","speed":0.3},{"pose":{"x":-3.40620327,"y":2.22284317,"theta":2.76688766},"direction":"kForward","speed":0.3},{"pose":{"x":-3.8325634,"y":2.36618233,"theta":2.86765575},"direction":"kForward","speed":0.3},{"pose":{"x":-4.27118,"y":2.46590233,"theta":2.96842384},"direction":"kForward","speed":0.3},{"pose":{"x":-4.71760368,"y":2.52099419,"theta":3.06919193},"direction":"kForward","speed":0.3},{"pose":{"x":-5.16730452,"y":2.53089714,"theta":-3.11322522},"direction":"kForward","speed":0.3},{"pose":{"x":-5.31714439,"y":2.5241251,"theta":-3.07963586},"direction":"kForward","speed":0.3},{"pose":{"x":-5.4667778,"y":2.5136795,"theta":-3.06414676},"direction":"kForward","speed":0.3},{"pose":{"x":-5.61610508,"y":2.49956512,"theta":-3.03055739},"direction":"kForward","speed":0.3},{"pose":{"x":-5.76504564,"y":2.4817915,"theta":-3.01506829},"direction":"kForward","speed":0.3},{"pose":{"x":-5.91350079,"y":2.4603672,"theta":-2.98147893},"direction":"kForward","speed":0.3},{"pose":{"x":-6.06115294,"y":2.43397045,"theta":-2.94788957},"direction":"kForward","speed":0.3},{"pose":{"x":-6.20811749,"y":2.40395927,"theta":-2.93240047},"direction":"kForward","speed":0.3},{"pose":{"x":-6.35429668,"y":2.37035084,"theta":-2.8988111},"direction":"kForward","speed":0.3},{"pose":{"x":-6.49961185,"y":2.33316612,"theta":-2.883322},"direction":"kForward","speed":0.3},{"pose":{"x":-6.6439662,"y":2.29242516,"theta":-2.84973264},"direction":"kForward","speed":0.3},{"pose":{"x":-6.78687096,"y":2.24686146,"theta":-2.81614327},"direction":"kForward","speed":0.3},{"pose":{"x":-6.92861938,"y":2.19780159,"theta":-2.80065417},"direction":"kForward","speed":0.3},{"pose":{"x":-7.06911659,"y":2.14528084,"theta":-2.76706481},"direction":"kForward","speed":0.3},{"pose":{"x":-7.2077713,"y":2.08807182,"theta":-2.73347545},"direction":"kForward","speed":0.3},{"pose":{"x":-7.61112309,"y":1.88898373,"theta":-2.63270736},"direction":"kForward","speed":0.3},{"pose":{"x":-7.61112309,"y":1.88898373,"theta":-2.63270736},"direction":"kBackward","speed":0.3},{"pose":{"x":-7.22984505,"y":2.12763786,"theta":-2.53193927},"direction":"kBackward","speed":0.3},{"pose":{"x":-6.87450933,"y":2.40343666,"theta":-2.43117118},"direction":"kBackward","speed":0.3},{"pose":{"x":-6.54872084,"y":2.71358299,"theta":-2.33040309},"direction":"kBackward","speed":0.3},{"pose":{"x":-6.24652576,"y":3.04696274,"theta":-2.28393555},"direction":"kBackward","speed":0.3},{"pose":{"x":-5.96976185,"y":3.40154839,"theta":-2.18316746},"direction":"kBackward","speed":0.3},{"pose":{"x":-5.73007202,"y":3.78217697,"theta":-2.08239937},"direction":"kBackward","speed":0.3},{"pose":{"x":-5.52988911,"y":4.18498707,"theta":-1.98163128},"direction":"kBackward","speed":0.3},{"pose":{"x":-5.35017,"y":4.59754181,"theta":-1.98163128},"direction":"kBackward","speed":0.3},{"pose":{"x":-5.16093254,"y":5.00577307,"theta":-2.02809882},"direction":"kBackward","speed":0.3},{"pose":{"x":-4.9529357,"y":5.40477371,"theta":-2.07456636},"direction":"kBackward","speed":0.3},{"pose":{"x":-4.71623468,"y":5.78726768,"theta":-2.17533445},"direction":"kBackward","speed":0.3},{"pose":{"x":-4.44225693,"y":6.14400959,"theta":-2.27610254},"direction":"kBackward","speed":0.3},{"pose":{"x":-4.13378143,"y":6.47138,"theta":-2.37687063},"direction":"kBackward","speed":0.3},{"pose":{"x":-3.79393768,"y":6.76605892,"theta":-2.47763872},"direction":"kBackward","speed":0.3},{"pose":{"x":-3.67427301,"y":6.856493,"theta":-2.51122808},"direction":"kBackward","speed":0.3},{"pose":{"x":-3.55163908,"y":6.94285727,"theta":-2.54481745},"direction":"kBackward","speed":0.3},{"pose":{"x":-3.42617416,"y":7.02505493,"theta":-2.57840681},"direction":"kBackward","speed":0.3},{"pose":{"x":-3.29872608,"y":7.1041522,"theta":-2.59389591},"direction":"kBackward","speed":0.3},{"pose":{"x":-3.16937923,"y":7.18009567,"theta":-2.62748528},"direction":"kBackward","speed":0.3},{"pose":{"x":-3.03755474,"y":7.25165176,"theta":-2.66107464},"direction":"kBackward","speed":0.3},{"pose":{"x":-2.90340233,"y":7.31874084,"theta":-2.694664},"direction":"kBackward","speed":0.3},{"pose":{"x":-2.76707172,"y":7.3812871,"theta":-2.72825336},"direction":"kBackward","speed":0.3},{"pose":{"x":-2.62871838,"y":7.43921947,"theta":-2.76184273},"direction":"kBackward","speed":0.3},{"pose":{"x":-2.48898029,"y":7.49374104,"theta":-2.77733183},"direction":"kBackward","speed":0.3},{"pose":{"x":-2.34795094,"y":7.54481602,"theta":-2.81092119},"direction":"kBackward","speed":0.3},{"pose":{"x":-2.2057066,"y":7.59241724,"theta":-2.82641029},"direction":"kBackward","speed":0.3},{"pose":{"x":-2.06234169,"y":7.6365118,"theta":-2.85999966},"direction":"kBackward","speed":0.3},{"pose":{"x":-1.91793346,"y":7.67707729,"theta":-2.87548876},"direction":"kBackward","speed":0.3},{"pose":{"x":-1.77257729,"y":7.71408558,"theta":-2.90907812},"direction":"kBackward","speed":0.3},{"pose":{"x":-1.77257729,"y":7.71408558,"theta":-2.90907812},"direction":"kForward","speed":0.3},{"pose":{"x":-1.91909409,"y":7.68197918,"theta":-2.94266748},"direction":"kForward","speed":0.3},{"pose":{"x":-2.06660557,"y":7.65481138,"theta":-2.97625685},"direction":"kForward","speed":0.3},{"pose":{"x":-2.2149477,"y":7.63261366,"theta":-3.00984621},"direction":"kForward","speed":0.3},{"pose":{"x":-2.36379337,"y":7.61406088,"theta":-3.02533531},"direction":"kForward","speed":0.3},{"pose":{"x":-2.51304436,"y":7.59916687,"theta":-3.05892467},"direction":"kForward","speed":0.3},{"pose":{"x":-2.51304436,"y":7.59916687,"theta":-3.05892467},"direction":"kBackward","speed":0.3},{"pose":{"x":-2.36337662,"y":7.60904026,"theta":-3.09251404},"direction":"kBackward","speed":0.3},{"pose":{"x":-2.21346092,"y":7.61388206,"theta":-3.1261034},"direction":"kBackward","speed":0.3},{"pose":{"x":-2.06346798,"y":7.61504364,"theta":-3.1415925},"direction":"kBackward","speed":0.3}]}
'''


def print_roads():
    js = json.loads(roads)
    eles = js["waypoints"]
    ls_res = list()
    for ele in eles:
        ls_res.append((ele["pose"]["x"], ele["pose"]["y"], ele["pose"]["theta"]))
    print(ls_res)

    xy = conv_tuple_list_to_x_y_map(ls_res)
    plt.scatter(xy.x, xy.y, s=POINT_SIZE , cmap=plt.cm.Spectral, alpha=0.8)
    plt.xlim((-10.0, 10.0))
    plt.ylim((-10.0, 10.0))    
    plt.xticks(range(-10, 10))
    plt.yticks(range(-10, 10))
    plt.show()

if __name__ == '__main__':
    print_roads()